/**
 * active-angular-dev - ng-resource on steroids
 * @authors 
 * @version v0.0.0
 * @link 
 * @license MIT
 */
!function(){angular.module("activeAngular",["ngSanitize"])}(),angular.module("activeAngular").constant("activeAngularConstant",{NO_ID:"noId"}),function(){function e(){var e="",r="items";this.setBaseUrl=function(r){e=r},this.setCollectionKey=function(e){r=e},this.$get=["$http","$log","$httpParamSerializerJQLike","activeAngularCache","ActiveArray","ActiveObject","activeAngularConstant","ActiveAngularUtilities",function(t,n,i,a,c,o,u,d){function f(f,l){function s(e,r){return r=r||"",e&&(r=i(e)+r),p.call(this,e,r,!0)}function v(e,r){var t=this;r=r||"",e&&(r=i(e)+r),e=d.stringToObject(e),e=d.undefinedToObject(e);var n=I(t._edgeUrl||e.id)+I(e.url)+I(r);n=_.toLower(n);var a=t.$cache.get(n);return a||(a=c.decorateArray([],t)),t.$cache.set(n,a),y(e,a,!0),a}function m(e,r){var t=this;this instanceof o&&(r=this.id,t=w);var n=t._edges[e],i=n.model,a=d.replaceUrlIdWithOptionsId(t.url,r);return i._edgeUrl=a+"/"+d.removeIdParam(i.url),i}function h(e,r){return p.call(this,e,r,!1)}function g(e,r){var t=this;e=d.stringToObject(e),e=d.undefinedToObject(e);var n=I(t._edgeUrl||e.id)+I(e.url)+I(r);n=_.toLower(n);var i=t.$cache.get(n);return i||(i=new o({},t)),t.$cache.set(n,i),y(e,i,!1),i}function $(){w.$cache.expireQueries()}function p(e,r,t){var n=this;e=d.stringToObject(e),e=d.undefinedToObject(e);var i=I(n._edgeUrl||e.id)+I(e.url)+I(r);i=_.toLower(i);var a=n.$cache.get(i);return a&&!a.$isExpired?(a.$deferPromise.resolve(a),n._edgeUrl="",a):(a||(a=t?c.decorateArray([],n):new o({},n)),n.$cache.set(i,a),y(e,a,t),a)}function y(e,r,t){w._http("GET",e).then(function(e){var n=e.data,i=angular.isArray(n);if(i!=t){if(!n[w._collectionKey])return T(e,i);r=U(r,n),n=x(n)}n=d.inheritActiveClass(n,w),i?(_.forEach(n,function(e,r){n[r]=P(e)}),n=w.$cache.setArray(n)):n=P(n),_.assign(r,_.omit(n,"$promise","$deferPromise")),_.forEach(r,function(e){e.$deferPromise&&e.$deferPromise.resolve(e)}),r.$deferPromise.resolve(r)})}function A(e){var r=this;e||(e=r),e&&!e.id&&(e.id=r.id);var t=angular.copy(r),n=_.extend(r,e);return w.$cache.set(n.id,n),w._http("PUT",e)["catch"](function(){w.$cache.set(t.id,t)})}function O(e){var r=this;if(e){e&&!e.id&&(e.id=r.id);var t=angular.copy(r),n=_.extend(r,e);return w.$cache.set(n.id,n),w._http("PATCH",e)["catch"](function(){w.$cache.set(t.id,t)})}}function b(e){var r=this;return e=d.stringToObject(e),e=d.undefinedToObject(e,r),w._http("DELETE",e).then(function(e){w.$cache.remove(e.data.id),r.$array||_.forOwn(r,function(e,t){delete r[t]})})}function j(e){return w._http("POST",e).then(function(e){var r=e.data;return r=d.inheritActiveClass(r,w),r=P(r)})}function E(r,n){var a=this,c=n.id,o=n.url;return a._edgeUrl&&(o=a._edgeUrl,a._edgeUrl=""),n={method:r,url:o||a.url,id:c,data:_.omit(n,"id","url")},n.id&&n.id!==u.NO_ID||(n.url=d.removeIdParam(n.url),delete n.id),n.url=d.replaceUrlIdWithOptionsId(n.url,n.id),delete n.id,"GET"===n.method&&Object.keys(n.data).length&&(n.url+=-1==n.url.indexOf("?")?"?":"&",n.url+=i(n.data)),n.url=e+"/"+n.url,t(n).then(function(e){return a._formatResponse&&(e.data=a._formatResponse(e.data)),e})}function T(e,r){return r?void n.error(e.config.url+" Expected an Object and got an Array from server."):void n.error(e.config.url+" Expected an Array and got an Object from server with collection key "+w._collectionKey+" not set.")}function P(e){return w.$hydrate?(_.forEach(w.$hydrate,function(r,t){var n=w._edges;if(!r.key||e[r.key]){var i=r.key||t;if(n&&n[t]){var a=n[t].model;return void(e[t]=a.$edge.call(w,i,e.id).$query())}e[t]=r.model.$get(e[i])}}),e):e}function x(e){return e[w._collectionKey]}function U(e,r){return _.forEach(r,function(r,t){t!==w._collectionKey&&Object.defineProperty(e,t,{enumerable:!1,value:r})}),e}function I(e){return e||""}h.$inject=["options","reference"],l=l||{};var w=this;w.$cache=a.create(l),w.$hydrate=l.hydrate,w.$edge=m,w.$get=h,w.$forceGet=g,w.$query=s,w.$forceQuery=v,w.$expireQueries=$,w.$save=A,w.$update=O,w.$remove=b,w.$create=j,w._http=E,w.url=f,w._edgeUrl="",w._formatResponse=l.formatResponse,w._collectionKey=l.collectionKey||r,w._edges=l.edges,w._get=p,w._hydrateCollection=x,w._hideMetadata=U,w._hydyrateData=P,w._logMismatchError=T}return f}]}angular.module("activeAngular").provider("ActiveAngular",e)}(),function(){angular.module("activeAngular").factory("activeAngularCache",function(){function e(e){function r(e){var r=f[e];return s.isExpired(r)&&(r.$isExpired=!0),r}function t(e,r){return f[e]?(f[e].$isExpired=!1,f[e]=s.setTimestamp(f[e]),f[e]=_.extend(f[e],r)):(s.setTimestamp(r),s.setIsExpired(r),f[e]=r)}function n(){_.forEach(s.cached,function(e){angular.isArray(e)&&(e.$isExpired=!0)})}function i(e){return _.forEach(e,function(r,t){e[t]=s.set(r.id,r)}),e}function a(e){var r=f;delete r[e],s.findAndRemove(r,e)}function c(e,r){_.forEach(e,function(t,n){angular.isArray(t)&&_.forOwn(t,function(t,i){return t.id===r?void delete e[n][i]:void 0})})}function o(e){if(!e)return!1;var r=e.$timestamp;if(!r)return!1;var t=(new Date).getTime();return t-r>s.cachedTime}function u(e){var r=(new Date).getTime();return angular.isDefined(e.$timestamp)||Object.defineProperty(e,"$timestamp",{enumerable:!1,get:function(){return r},set:function(e){r=e}}),e.$timestamp=r,e}function d(e){var r=!1;angular.isDefined(e.$isExpired)||Object.defineProperty(e,"$isExpired",{enumerable:!1,get:function(){return r},set:function(e){r=e}})}var f={},l=3e5;e&&e.cacheTime&&(l=e.cacheTime);var s={get:r,set:t,expireQueries:n,setArray:i,setTimestamp:u,setIsExpired:d,remove:a,findAndRemove:c,isExpired:o,cached:f,cachedTime:l};return s}var r={create:e};return r})}(),function(){function e(e,r,t){function n(e,n){return angular.isArray(e)?(e=t.decorateArray(e,n),_.forEach(e,function(t,i){e[i]=new r(t,n)}),e):new r(e,n)}function i(e){return e=e.replace(":id",""),e=e.replace("//","/"),e=_.trimEnd(e,"/")}function a(e,r){return e.indexOf(":id")>-1&&r&&(e=e.replace(":id",r)),e}function c(e){if(angular.isString(e)){var r=e;e={},e.id=r}return e}function o(r,t){if(angular.isUndefined(r)){r={};var n=t?t.id:e.NO_ID;r.id=n}return r}var u={inheritActiveClass:n,removeIdParam:i,replaceUrlIdWithOptionsId:a,stringToObject:c,undefinedToObject:o};return u}e.$inject=["activeAngularConstant","ActiveObject","ActiveArray"],angular.module("activeAngular").factory("ActiveAngularUtilities",e)}(),function(){angular.module("activeAngular").factory("ActiveArray",["$q",function(e){function r(r,t){var n=e.defer();return r.$remove=function(e){t.$remove(e)},r.$create=function(e){t.$create(e)},r.$get=function(e,r){t.$get(e,r)},r.$forceGet=function(e,r){t.$forceGet(e,r)},r.$promise=n.promise,r.$deferPromise=n,r}var t={decorateArray:r};return t}])}(),function(){angular.module("activeAngular").factory("ActiveObject",["$q",function(e){function r(r,t){var n=this,i=e.defer();_.forOwn(r,function(e,r){n[r]=e}),Object.defineProperty(n,"$remove",{enumerable:!1,value:t.$remove}),Object.defineProperty(n,"$save",{enumerable:!1,value:t.$save}),Object.defineProperty(n,"$update",{enumerable:!1,value:t.$update}),Object.defineProperty(n,"$edge",{enumerable:!1,value:t.$edge}),Object.defineProperty(n,"$promise",{enumerable:!1,value:i.promise}),Object.defineProperty(n,"$deferPromise",{enumerable:!1,value:i})}return r}])}();